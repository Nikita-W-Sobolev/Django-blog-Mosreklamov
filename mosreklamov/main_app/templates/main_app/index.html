{% extends 'base.html' %}
{% load static %}

<!--–ë–ª–æ–∫ –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –∫–æ–Ω—Ç–µ–Ω—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö: —Å—Ç–∞—Ç—å–∏ –∏ —Å—Ç–∞—Ç—å—è. –î–æ–±–∞–≤–ª—è–µ—Ç —Ç–µ–≥–∏.-->
{% block content %}
<div class="title-body">{{ title }}</div>


<!--–û—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –≤—ã–≤–æ–¥ —Å—Ç–∞—Ç–µ–π –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º-->
{% if articles %}
  {% if page_obj %}  <!--–†–∞–±–æ—Ç–∞–µ–º —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π (page_obj) –∞ –Ω–µ —Å articles-->
    {% include "main_app/includes/pagination.html" with extra_class="top-pagination" %}  <!--–í–µ—Ä—Ö–Ω–∏–π –ø–∞–≥–∏–Ω–∞—Ç–æ—Ä-->
    <div class="articles">
      {% for article in page_obj %}  <!--–†–∞–±–æ—Ç–∞–µ–º —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π (page_obj)-->
        <div class="article">
          {% if article.photo %}
            <img class="img-article-left thumb" src="{{article.photo.url}}">
          {% endif %}
          <h1>{{ article.title }}</h1>
          <p>{{ article.content|truncatewords:50 }}</p>
          <p>–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è: {{ article.time_create|date:"d-m-Y H:i:s" }}</p>
          <a class="link-read-post" href="{{ article.get_absolute_url }}">–ß–∏—Ç–∞—Ç—å —Å—Ç–∞—Ç—å—é</a>
        </div>
      {% endfor %}
    </div>
    {% include "main_app/includes/pagination.html" with extra_class="bottom-pagination" %}  <!--–ù–∏–∂–Ω–∏–π –ø–∞–≥–∏–Ω–∞—Ç–æ—Ä-->
  {% else %}  <!--–ï—Å–ª–∏ —Å—Ç–∞—Ç–µ–π –Ω–µ—Ç-->
    <div class="no-articles">
      <p>–í —ç—Ç–æ–π —Ä—É–±—Ä–∏–∫–µ –ø–æ–∫–∞ –Ω–µ—Ç —Å—Ç–∞—Ç–µ–π</p>  <!--–°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Å—Ç–∞—Ç–µ–π-->
    </div>
  {% endif %}
{% endif %}


<!--–û—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ–¥–Ω–æ–π —Å—Ç–∞—Ç—å–∏-->
{% if article %}
  <div class="article-tag">
    {% with article.tags.all as art_tags %}
      {% if art_tags %}
        <ul class="tag_list">
          <li>–¢–µ–≥–∏:</li>
          {% for i in art_tags %}
          <li><a href="{{i.get_absolute_url}}">{{i.name}}</a></li>
          {% endfor %}
        </ul>
      {% endif %}
    {% endwith %}
  </div>
  <div class="articles">
    {% if article.photo %}
      <img class="img-article-left thumb" src="{{article.photo.url}}">
    {% endif %}
    <p>{{ article.content }}</p>
    <p>–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è: {{ article.time_create|date:"d-m-Y H:i:s" }}</p>
    <div class="article-footer">
      <a class="back-to-category" href="{{ article.categories.get_absolute_url }}">–ù–∞–∑–∞–¥ –≤ —Ä—É–±—Ä–∏–∫—É</a>
      <div class="article-actions">
        <a class="edit-btn" href="{% url 'edit_article' article.id %}">‚úé –ò–∑–º–µ–Ω–∏—Ç—å</a>
        <button class="delete-btn" onclick="showDeleteModal({{ article.id }})">üóë –£–¥–∞–ª–∏—Ç—å</button>
      </div>
    </div>
  </div>
  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è-->
  <div id="deleteModal-{{ article.id }}" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal({{ article.id }})">&times;</span>
      <h3>–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ —É–¥–∞–ª–µ–Ω–∏–µ</h3>
      <p>–í—ã —Ç–æ—á–Ω–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ç—å—é "{{article.title}}"?</p>
      <form action="{% url 'delete_article' article.id %}" method="post" class="modal-form">
        {% csrf_token %}
        <div class="modal-buttons">
          <button type="button" class="cancel-btn" onclick="closeModal({{ article.id }})">–û—Ç–º–µ–Ω–∞</button>
          <button type="submit" class="confirm-delete-btn">–£–¥–∞–ª–∏—Ç—å</button>
        </div>
      </form>
    </div>
  </div>
{% endif %}


<!--–û—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –≤—ã–≤–æ–¥ —Å—Ç–∞—Ç–µ–π –ø–æ —Ç–µ–≥–∞–º-->
{% if posts %}
  {% if page_obj %}  <!--–†–∞–±–æ—Ç–∞–µ–º —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π (page_obj) –∞ –Ω–µ —Å articles-->
    {% include "main_app/includes/pagination.html" with extra_class="top-pagination" %}  <!--–í–µ—Ä—Ö–Ω–∏–π –ø–∞–≥–∏–Ω–∞—Ç–æ—Ä-->
    <div class="articles">
      {% for post in page_obj %}
        <div class="article">
          {% if post.photo %}
            <img class="img-article-left thumb" src="{{post.photo.url}}">
          {% endif %}
          <h1>{{ post.title }}</h1>
          <p>{{ post.content|truncatewords:50 }}</p>
          <p>–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è: {{ post.time_create|date:"d-m-Y H:i:s" }}</p>
          <a class="link-read-post" href="{{ post.get_absolute_url }}">–ß–∏—Ç–∞—Ç—å —Å—Ç–∞—Ç—å—é</a>
        </div>
      {% endfor %}
    </div>
    {% include "main_app/includes/pagination.html" with extra_class="bottom-pagination" %}  <!--–ù–∏–∂–Ω–∏–π –ø–∞–≥–∏–Ω–∞—Ç–æ—Ä-->
  {% else %}  <!--–ï—Å–ª–∏ —Å—Ç–∞—Ç–µ–π –Ω–µ—Ç-->
    <div class="no-articles">
      <p>–í —ç—Ç–æ–π —Ä—É–±—Ä–∏–∫–µ –ø–æ–∫–∞ –Ω–µ—Ç —Å—Ç–∞—Ç–µ–π</p>  <!--–°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Å—Ç–∞—Ç–µ–π-->
    </div>
  {% endif %}
{% endif %}


<!--–ë–ª–æ–∫ –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—å–∏-->
{% if add_edit_article %}
  <div class="add_page">
    <form action="" method="POST" enctype="multipart/form-data">
      {% csrf_token %}
      {% if form.non_field_errors %}
      <div class="form-error">{{ form.non_field_errors }}</div>
      {% endif %}
      {% for i in form %}
      <label class="form-label" for="{{ i.id_for_label }}">{{i.label}}: </label>{{ i }}
      {% if i.errors %}
      <div class="form-error">{{ i.errors }}</div>
      {% endif %}
      {% endfor %}
      <p><button type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
    </form>
  </div>
{% endif%}

{% endblock %}


<!--–ë–ª–æ–∫ –æ—Ç–≤–µ—á–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∑–∞ —Ç–µ–∫—Å—Ç –∏ —Å–ª–∞–π–¥–µ—Ä –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ-->
{% block home_content %}
  {% if show_home_text %}
    {% include 'main_app/includes/home.html' %}
  {% endif %}
{% endblock %}
